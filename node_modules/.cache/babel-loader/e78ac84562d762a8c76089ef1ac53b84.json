{"ast":null,"code":"var _jsxFileName = \"/Users/rachel/Desktop/A4-How-does-Coronavirus-spreadirus-spread/my-app/src/LineChart.js\";\nimport React, { Component } from 'react';\nimport * as d3 from \"d3\";\nconst width = 960;\nconst height = 500;\nconst margin = {\n  top: 50,\n  right: 50,\n  bottom: 100,\n  left: 50\n};\n\nclass LineChart extends Component {\n  componentDidMount() {\n    this.drawChart(this.props.data);\n  }\n\n  componentDidUpdate() {\n    this.update(this.props.data, this.props.data_to_show);\n  }\n\n  drawChart(data) {\n    // ------- scale ---------//\n    var xScale = d3.scaleTime().domain(d3.extent(data, d => d.date)).range([margin.left, width - margin.right]);\n    var yScale = d3.scaleLinear().domain([0, d3.max(data, d => d.positive)]).nice().range([height - margin.bottom, margin.top]); // --------- axis --------//\n\n    const xAxis = d3.axisBottom().ticks(d3.timeDay.every(1)).tickFormat(d3.timeFormat('%m/%d')).scale(xScale);\n    const yAxis = d3.axisLeft().ticks(10).scale(yScale); // ------- draw --------//\n\n    this.svg = d3.select(this.refs.chart).append(\"svg\").attr('width', width).attr('height', height);\n    this.svg.append(\"g\").attr(\"transform\", `translate(0,${height - margin.bottom})`).call(xAxis);\n    this.svg.append(\"g\").attr(\"transform\", `translate(${margin.left},0)`).call(yAxis);\n  } // ------- chart ------//\n  // function update(new_data){\n  //   var path = chart.selectAll('path').data(new_data)\n  //\n  //   var circles = chart.selectAll('circle').data(new_data)\n  //\n  //   path.enter()\n  //       .attr(\"stroke-width\", 2)\n  //       .attr(\"stroke\", \"steelblue\")\n  //       .attr(\"fill\", \"none\")\n  //       .attr(\"d\", line)\n  //\n  //   path.exit.remove()\n  //\n  //   circles.enter()\n  //         .append(\"circle\")\n  //          .attr(\"r\", 4.5)\n  //          .attr(\"stroke\", \"steelblue\")\n  //          .attr(\"fill\", \"steelblue\")\n  //          .attr(\"cx\", function(d) { return xScale(d.date); })\n  //          .attr(\"cy\", function(d) { return yScale(d.positive); })\n  //\n  //   circles.exit.remove()\n  // }\n\n\n  update(data, data_to_show) {\n    var xScale = d3.scaleTime().domain(d3.extent(data, d => d.date)).range([margin.left, width - margin.right]);\n    var yScale = d3.scaleLinear().domain([0, d3.max(data, d => d.positive)]).nice().range([height - margin.bottom, margin.top]);\n    var line = d3.line().x(d => xScale(d.date)).y(d => yScale(d.positive));\n    this.chart = this.svg.append(\"g\");\n    this.chart.append(\"path\").datum(data_to_show).attr(\"stroke-width\", 2).attr(\"stroke\", \"steelblue\").attr(\"fill\", \"none\").attr(\"d\", line);\n    this.chart.selectAll('circle').data(data_to_show).enter().append(\"circle\").attr(\"r\", 4.5).attr(\"stroke\", \"steelblue\").attr(\"fill\", \"steelblue\").attr(\"cx\", function (d) {\n      return this.xScale(d.date);\n    }).attr(\"cy\", function (d) {\n      return this.yScale(d.positive);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: \"chart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 20\n      }\n    });\n  }\n\n}\n\nexport default LineChart;","map":{"version":3,"sources":["/Users/rachel/Desktop/A4-How-does-Coronavirus-spreadirus-spread/my-app/src/LineChart.js"],"names":["React","Component","d3","width","height","margin","top","right","bottom","left","LineChart","componentDidMount","drawChart","props","data","componentDidUpdate","update","data_to_show","xScale","scaleTime","domain","extent","d","date","range","yScale","scaleLinear","max","positive","nice","xAxis","axisBottom","ticks","timeDay","every","tickFormat","timeFormat","scale","yAxis","axisLeft","svg","select","refs","chart","append","attr","call","line","x","y","datum","selectAll","enter","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport * as d3 from \"d3\"\n\nconst width = 960;\nconst height = 500;\nconst margin = {top: 50, right: 50, bottom: 100, left:50};\n\nclass LineChart extends Component {\n\n  componentDidMount() {\n    this.drawChart(this.props.data)\n  }\n\n  componentDidUpdate(){\n    this.update(this.props.data, this.props.data_to_show)\n  }\n\n  drawChart(data) {\n    // ------- scale ---------//\n    var xScale = d3.scaleTime()\n      .domain(d3.extent(data, d => d.date))\n      .range([margin.left, width - margin.right]);\n\n    var yScale = d3.scaleLinear()\n      .domain ([0, d3.max(data, d => d.positive)]).nice()\n      .range([height - margin.bottom, margin.top])\n\n    // --------- axis --------//\n    const xAxis = d3.axisBottom()\n      .ticks(d3.timeDay.every(1))\n      .tickFormat(d3.timeFormat('%m/%d'))\n      .scale(xScale);\n\n    const yAxis = d3.axisLeft()\n      .ticks(10)\n      .scale(yScale);\n\n    // ------- draw --------//\n    this.svg = d3.select(this.refs.chart)\n      .append(\"svg\")\n      .attr('width', width )\n      .attr('height', height )\n\n    this.svg.append(\"g\")\n      .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n      .call(xAxis);\n\n    this.svg.append(\"g\")\n      .attr(\"transform\", `translate(${margin.left},0)`)\n      .call(yAxis);\n    }\n    // ------- chart ------//\n\n\n    // function update(new_data){\n    //   var path = chart.selectAll('path').data(new_data)\n    //\n    //   var circles = chart.selectAll('circle').data(new_data)\n    //\n    //   path.enter()\n    //       .attr(\"stroke-width\", 2)\n    //       .attr(\"stroke\", \"steelblue\")\n    //       .attr(\"fill\", \"none\")\n    //       .attr(\"d\", line)\n    //\n    //   path.exit.remove()\n    //\n    //   circles.enter()\n    //         .append(\"circle\")\n    //          .attr(\"r\", 4.5)\n    //          .attr(\"stroke\", \"steelblue\")\n    //          .attr(\"fill\", \"steelblue\")\n    //          .attr(\"cx\", function(d) { return xScale(d.date); })\n    //          .attr(\"cy\", function(d) { return yScale(d.positive); })\n    //\n    //   circles.exit.remove()\n    // }\n\n    update(data, data_to_show){\n      var xScale = d3.scaleTime()\n        .domain(d3.extent(data, d => d.date))\n        .range([margin.left, width - margin.right]);\n\n      var yScale = d3.scaleLinear()\n        .domain ([0, d3.max(data, d => d.positive)]).nice()\n        .range([height - margin.bottom, margin.top])\n\n      var line = d3.line()\n        .x(d => xScale(d.date))\n        .y(d => yScale(d.positive))\n\n      this.chart = this.svg.append(\"g\")\n\n\n      this.chart.append(\"path\")\n           .datum(data_to_show)\n           .attr(\"stroke-width\", 2)\n           .attr(\"stroke\", \"steelblue\")\n           .attr(\"fill\", \"none\")\n           .attr(\"d\", line)\n\n      this.chart.selectAll('circle')\n        .data(data_to_show)\n        .enter()\n          .append(\"circle\")\n           .attr(\"r\", 4.5)\n           .attr(\"stroke\", \"steelblue\")\n           .attr(\"fill\", \"steelblue\")\n           .attr(\"cx\", function(d) { return this.xScale(d.date); })\n           .attr(\"cy\", function(d) { return this.yScale(d.positive); })\n    }\n\n  render() {return <div ref=\"chart\"></div>}\n}\n\n\nexport default LineChart;\n"]},"metadata":{},"sourceType":"module"}