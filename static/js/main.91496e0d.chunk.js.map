{"version":3,"sources":["App.js","LineChart.js","slider.js","StateSelector.js","index.js"],"names":["margin","LineChart","this","drawChart","props","data","update","threshold","selected","startDate","date","endDate","length","maxi","d3","series","s","positive","map","d","console","log","xScale","domain","range","yScale","nice","xAxis","ticks","every","tickFormat","scale","yAxis","svg","refs","chart","append","attr","call","y_axis","index","findIndex","getDate","tp_data","filter","includes","name","new_data","slice","color","line","defined","x","i","y","selectAll","join","style","text","ref","Component","Slider","drawSlider","updateToParent","formatDate","width","height","slider","clamp","select","parentNode","appendChild","cloneNode","on","interrupt","h","invert","handle","label","insert","enter","StateSelector","state","country","region","val","setState","value","labelType","valueType","onChange","selectRegion","parseDate","statesjson","App","updateThreshold","updateStateSelected","chosen","concat","onClearClick","className","type","onClick","href","class","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.91496e0d.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport * as d3 from \"d3\"\nimport LineChart from './LineChart'\nimport Slider from './slider'\nimport StateSelector from './StateSelector'\nimport './app.css'\n\n// import datajson from './us.json'\nimport usjson from './us_2.json'\nimport statesjson from './states.json'\n\nvar parseDate = d3.timeParse(\"%Y%m%d\")\n\nfor(var i = 0; i < statesjson.date.length; i++){\n  statesjson.date[i] = parseDate(statesjson.date[i])\n  console.log(statesjson.date[i])\n}\n\n  class App extends Component {\n\n    constructor(){\n      super();\n      this.state = {\n        data : statesjson,\n        threshold : statesjson.date[0],\n        selected : []\n\n      }\n    }\n\n    updateThreshold = (data) => {\n      this.setState({threshold : data})\n    }\n\n    updateStateSelected = (chosen) => {\n      this.setState({selected: this.state.selected.concat([chosen]) })\n    }\n\n\n    onClearClick = () => {\n      this.setState({selected: []})\n    }\n\n\n\n    render () {\n      return (\n        <div className = \"App\">\n        <div>\n            COVID-19 Cases Increase Over Time\n            <LineChart data={this.state.data} threshold = {this.state.threshold} selected={this.state.selected} />\n            <div className= 'controldiv'>\n              <Slider data={this.state.data} updateToParent = {this.updateThreshold}/>\n              <div className = 'rowC'>\n                <StateSelector updateToParent = {this.updateStateSelected}/>\n                <button type=\"button\" onClick = {this.onClearClick}>Clear</button>\n              </div>\n            </div>\n            <a href='https://github.mit.edu/pages/6894-sp20/A4-How-does-Coronavirus-spread/multiView.html' class=\"previous\">previous</a>\n        </div>\n        </div>\n      )\n    }\n\n  }\n\n\nexport default App;\n\n","import React, {Component} from 'react'\nimport * as d3 from \"d3\"\n\nconst width = 960;\nconst height = 500;\nconst margin = {top: 50, right: 50, bottom: 100, left:50};\n\nclass LineChart extends Component {\n\n  componentDidMount() {\n    this.drawChart(this.props.data)\n  }\n\n  componentDidUpdate(){\n    this.update(this.props.data, this.props.threshold, this.props.selected)\n  }\n\n  drawChart(data) {\n    // ------- scale ---------//\n    // let new_data = data.filter(function(d) {return d.date <\n    var startDate = data.date[0],\n        endDate = data.date[data.date.length-1];\n\n    var maxi = d3.max(data.series, s => d3.max(s.positive.map(\n      function(d) {\n            if (d !== \"undefined\") {return d}\n            else { return -1}\n      })))\n    console.log(d3.max(data.series[0].positive))\n    console.log(maxi)\n\n    var xScale = d3.scaleTime()\n      .domain([startDate, endDate])\n      .range([margin.left, width - margin.right]);\n\n    var yScale = d3.scaleLinear()\n      .domain ([0, maxi]).nice()\n      .range([height - margin.bottom, margin.top])\n\n    // --------- axis --------//\n    const xAxis = d3.axisBottom()\n      .ticks(d3.timeDay.every(1))\n      .tickFormat(d3.timeFormat('%m/%d'))\n      .scale(xScale);\n\n    this.yAxis = d3.axisLeft()\n      .ticks(10)\n      .scale(yScale);\n\n    // ------- draw --------//\n    this.svg = d3.select(this.refs.chart)\n      .append(\"svg\")\n      .attr('width', width )\n      .attr('height', height )\n\n    this.svg.append(\"g\")\n      .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n      .call(xAxis);\n\n    this.y_axis = this.svg.append(\"g\")\n        .attr(\"transform\", `translate(${margin.left},0)`)\n        .call(this.yAxis)\n\n\n    this.chart = this.svg.append(\"g\")\n\n\n    }\n\n    update(data, threshold, selected){\n      // let new_data = data.filter(function(d) {return d.date <\n      console.log(selected)\n      var index = data.date.findIndex(function(d) {return d.getDate() === threshold.getDate()});\n      var tp_data = data.series.filter(d => {return selected.includes(d.name)})\n\n      var new_data = tp_data.map(d => { return {\n        name: d.name,\n        positive: d.positive.slice(0,index)\n        }\n      })\n      console.log(new_data)\n\n      var startDate = data.date[0],\n          endDate = data.date[data.date.length-1];\n\n      var maxi = d3.max(tp_data, s => d3.max(s.positive.map(\n        function(d) {\n              if (d !== \"undefined\") {return d}\n              else { return -1}\n        })))\n\n      var xScale = d3.scaleTime()\n        .domain([startDate, endDate])\n        .range([margin.left, width - margin.right]);\n\n      var yScale = d3.scaleLinear()\n        .domain ([0, maxi]).nice()\n        .range([height - margin.bottom, margin.top])\n\n      this.yAxis.scale(yScale);\n\n      this.y_axis.call(this.yAxis);\n\n      var color = d3.scaleOrdinal(d3.schemeTableau10).domain(new_data.map(d => d.name));\n\n      var line = d3.line()\n        .defined(d => d !== \"undefined\")\n        .x((d,i) => xScale(data.date[i]))\n        .y(d => yScale(d))\n\n      this.chart.selectAll(\"path\")\n        .data(new_data)\n          .join(\"path\")\n            .attr(\"stroke-width\", 2)\n            .attr(\"stroke\", (d)=> color(d.name))\n            .attr(\"fill\", \"none\")\n            .attr(\"d\", d=>line(d.positive))\n\n      this.chart.selectAll(\"text\")\n        .data(new_data)\n          .join(\"text\")\n          .attr(\"x\", xScale(endDate))  // space legend\n          .attr(\"y\", (d,i) => margin.top + i*15)\n          .attr(\"class\", \"legend\")    // style the legend\n          .style(\"fill\", (d) => color(d.name))\n          .text(d => d.name);\n        }\n\n\n  render() {return <div ref=\"chart\"></div>}\n}\n\n\nexport default LineChart;\n","import React, {Component} from 'react'\nimport * as d3 from \"d3\"\n\n\nclass Slider extends Component {\n\n  componentDidMount() {\n    this.drawSlider(this.props.data, this.props.updateToParent)\n  }\n\n  drawSlider(data, updateToParent) {\n    console.log(\"here\")\n    var formatDate = d3.timeFormat(\"%m/%d\");\n\n    // var startDate = data[0].date,\n    //     endDate = data[(data.length)-1].date;\n    var startDate = data.date[0],\n        endDate = data.date[data.date.length-1];\n\n    var margin = {top:0, right:50, bottom:0, left:50},\n        width = 480 -margin.left - margin.right,\n        height = 300 - margin.top - margin.bottom;\n\n    var svg = d3.select(this.refs.slider)\n        .append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height);\n\n    var x = d3.scaleTime()\n        .domain([startDate, endDate])\n        .range([0, width])\n        .clamp(true);\n\n    var slider = svg.append(\"g\")\n        .attr(\"class\", \"slider\")\n        .attr(\"transform\", \"translate(\" + margin.left + \",50)\");\n\n    slider.append(\"line\")\n        .attr(\"class\", \"track\")\n        .attr(\"x1\", x.range()[0])\n        .attr(\"x2\", x.range()[1])\n        .attr(\"stroke\", \"#000\")\n        .attr(\"stroke-opacity\", 0.1)\n        .attr(\"stroke-width\", \"10px\")\n      .select(function() { return this.parentNode.appendChild(this.cloneNode(true)); })\n        .attr(\"class\", \"track-inset\")\n      .select(function() { return this.parentNode.appendChild(this.cloneNode(true)); })\n        .attr(\"class\", \"track-overlay\")\n        .call(d3.drag()\n            .on(\"start.interrupt\", function() { slider.interrupt(); })\n            .on(\"start drag\", function() {\n              update(x.invert(d3.event.x));\n             }));\n\n    slider.insert(\"g\", \".track-overlay\")\n        .attr(\"class\", \"ticks\")\n        .attr(\"transform\", \"translate(0,\" + 18 + \")\")\n      .selectAll(\"text\")\n        .data(x.ticks(5))\n        .enter()\n        .append(\"text\")\n        .attr(\"x\", x)\n        .attr(\"y\", 10)\n        .attr(\"text-anchor\", \"middle\")\n        .text(function(d) { return formatDate(d); });\n\n    var label = slider.append(\"text\")\n        .attr(\"class\", \"label\")\n        .attr(\"text-anchor\", \"middle\")\n        .text(formatDate(startDate))\n        .attr(\"transform\", \"translate(0,\" + (-25) + \")\")\n\n    var handle = slider.insert(\"circle\", \".track-overlay\")\n        .attr(\"class\", \"handle\")\n        .attr(\"r\", 9);\n\n    function update(h) {\n      handle.attr(\"cx\", x(h));\n      label\n        .attr(\"x\", x(h))\n        .text(formatDate(h));\n\n      updateToParent(h);\n    }\n\n  }\n  render() {return <div ref=\"slider\"></div>}\n\n\n}\n\nexport default Slider;\n","import React, {Component} from 'react'\nimport * as d3 from \"d3\"\nimport { CountryDropdown, RegionDropdown, CountryRegionData } from 'react-country-region-selector';\n\n\nclass StateSelector extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      country: \"United States\", region:\"\"\n    }\n  }\n\n  selectRegion(val) {\n    this.setState({region: val})\n    this.props.updateToParent(val)\n  }\n\n  render () {\n    const {country, region} = this.state;\n    return (\n      <div>\n        <RegionDropdown\n          country={this.state.country}\n          value = {region}\n          labelType=\"short\"\n          valueType=\"short\"\n          onChange = {(val) => {\n            console.log(val)\n            this.selectRegion(val)}\n          }/>\n      </div>\n    )\n\n  }\n}\nexport default StateSelector;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />, document.getElementById('root')\n\n);\n"],"sourceRoot":""}